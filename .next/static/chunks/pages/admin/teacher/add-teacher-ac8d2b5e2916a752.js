(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[924],{9333:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/teacher/add-teacher",function(){return r(5937)}])},5937:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return c}});var t=r(5893),a=r(7294),o=r(1163),d=r(7730),i=r(2497),l=r(6455),n=r.n(l),m=()=>{let[e,s]=(0,a.useState)({username:"",password:"",full_name:"",role:"",phone:"",gender:"",expertise:"",address:"",position:"",description:"",plain_password:"",image:null}),[r,o]=(0,a.useState)(""),[d,l]=(0,a.useState)(!1),[m,c]=(0,a.useState)(null);(0,a.useEffect)(()=>{s(e=>({...e,plain_password:e.password}))},[e.password]);let u=e=>{let{name:r,value:t}=e.target;s(e=>({...e,[r]:t}))},x=async r=>{r.preventDefault(),l(!0),o("");let t=new FormData;Object.keys(e).forEach(s=>{"image"!==s&&t.append(s,e[s])}),e.image&&t.append("image",e.image);try{let e=await fetch("".concat(i.Z,"/api/auth/register"),{method:"POST",body:t});if(!e.ok){let s=await e.json();throw Error(s.message||"Registration failed")}n().fire({icon:"success",title:"Registration Successful",text:"You have been registered successfully!",confirmButtonText:"OK"}),s({username:"",password:"",full_name:"",role:"",phone:"",gender:"",expertise:"",address:"",position:"",description:"",plain_password:"",image:null}),c(null)}catch(e){n().fire({icon:"error",title:"Registration Failed",text:e.message||"An unexpected error occurred",confirmButtonText:"Retry"}),o(e.message||"An unexpected error occurred")}finally{l(!1)}};return(0,t.jsxs)("div",{className:"min-h-screen bg-gray-100 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:[(0,t.jsx)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:(0,t.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Register New Account"})}),(0,t.jsx)("div",{className:"mt-8 sm:mx-auto sm:w-full sm:max-w-md",children:(0,t.jsxs)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:[r&&(0,t.jsx)("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative",role:"alert",children:(0,t.jsx)("span",{className:"block sm:inline",children:r})}),(0,t.jsxs)("form",{className:"space-y-6",onSubmit:x,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,t.jsx)("input",{id:"username",name:"username",type:"text",value:e.username,onChange:u,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,t.jsx)("input",{id:"password",name:"password",type:"password",value:e.password,onChange:u,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"full_name",className:"block text-sm font-medium text-gray-700",children:"Full Name"}),(0,t.jsx)("input",{id:"full_name",name:"full_name",type:"text",value:e.full_name,onChange:u,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700",children:"Role"}),(0,t.jsxs)("select",{id:"role",name:"role",value:e.role,onChange:u,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,t.jsx)("option",{value:"",children:"Select a role"}),(0,t.jsx)("option",{value:"headmaster",children:"Headmaster"}),(0,t.jsx)("option",{value:"teacher",children:"teacher"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),(0,t.jsx)("input",{id:"phone",name:"phone",type:"text",value:e.phone,onChange:u,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"gender",className:"block text-sm font-medium text-gray-700",children:"Gender"}),(0,t.jsxs)("select",{id:"gender",name:"gender",value:e.gender,onChange:u,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[(0,t.jsx)("option",{value:"",children:"Select a gender"}),(0,t.jsx)("option",{value:"male",children:"Male"}),(0,t.jsx)("option",{value:"female",children:"Female"}),(0,t.jsx)("option",{value:"other",children:"Other"})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"expertise",className:"block text-sm font-medium text-gray-700",children:"Expertise"}),(0,t.jsx)("input",{id:"expertise",name:"expertise",type:"text",value:e.expertise,onChange:u,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,t.jsx)("input",{id:"address",name:"address",type:"text",value:e.address,onChange:u,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"position",className:"block text-sm font-medium text-gray-700",children:"Position"}),(0,t.jsx)("input",{id:"position",name:"position",type:"text",value:e.position,onChange:u,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,t.jsx)("textarea",{id:"description",name:"description",value:e.description,onChange:u,required:!0,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"image",className:"block text-sm font-medium text-gray-700",children:"Profile Image"}),(0,t.jsx)("input",{id:"image",name:"image",type:"file",accept:"image/*",onChange:e=>{let r=e.target.files[0];if(r){let e=new FileReader;e.onloadend=()=>{c(e.result)},e.readAsDataURL(r),s(e=>({...e,image:r}))}},className:"mt-1 block w-full"}),m&&(0,t.jsx)("div",{className:"mt-2",children:(0,t.jsx)("img",{src:m,alt:"Image Preview",className:"w-32 h-32 object-cover"})})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-indigo-600 text-white font-semibold py-2 px-4 rounded-md hover:bg-indigo-700 disabled:bg-gray-300",children:d?"Registering...":"Register"})})]})]})})]})},c=()=>{let{user:e}=(0,a.useContext)(d.S),s=(0,o.useRouter)();return(0,a.useEffect)(()=>{e?"headmaster"!==e.role&&s.push("/unauthorized"):s.push("/login")},[e]),e&&"headmaster"===e.role&&(0,t.jsx)(m,{})}}},function(e){e.O(0,[166,888,774,179],function(){return e(e.s=9333)}),_N_E=e.O()}]);