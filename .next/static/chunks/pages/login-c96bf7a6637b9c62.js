(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[459],{6429:function(e,s,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login",function(){return r(2739)}])},2739:function(e,s,r){"use strict";r.r(s),r.d(s,{default:function(){return l}});var t=r(5893),n=r(7294),a=r(1163),i=r(2497),o=r(7730),d=()=>{let[e,s]=(0,n.useState)({username:"",password:""}),[r,d]=(0,n.useState)(!1),[l,c]=(0,n.useState)(!1),[u,m]=(0,n.useState)(""),[g,h]=(0,n.useState)(!1),x=(0,a.useRouter)(),{login:p}=(0,n.useContext)(o.S),b=e=>{let{name:r,value:t}=e.target;s(e=>({...e,[r]:t}))},f=async s=>{s.preventDefault(),h(!0),m("");try{var t,n;let s=await fetch("".concat(i.Z,"/api/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e),credentials:"include"}),a=await s.json();if(!s.ok)throw Error(a.message||"Login failed");r?localStorage.setItem("user",JSON.stringify(a.user)):sessionStorage.setItem("user",JSON.stringify(a.user)),(null===(t=a.user)||void 0===t?void 0:t.role)==="headmaster"?x.push("/admin/headmaster"):(null===(n=a.user)||void 0===n?void 0:n.role)==="teacher"?x.push("/admin/teacher-dashboard"):x.push("/admin")}catch(e){m(e.message||"An unexpected error occurred"),console.error("Login error:",e)}finally{h(!1)}};return(0,t.jsx)("div",{className:" bg-gray-100 flex items-center justify-center py-12 px-6 sm:px-8 lg:px-16",children:(0,t.jsxs)("div",{className:"max-w-md w-full bg-white p-8 rounded-lg shadow-lg",children:[(0,t.jsx)("h2",{className:"text-2xl font-extrabold text-gray-900 text-center mb-6",children:"Log In"}),u&&(0,t.jsx)("div",{className:"mb-4 bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",role:"alert",children:(0,t.jsx)("span",{className:"block sm:inline",children:u})}),(0,t.jsxs)("form",{className:"space-y-6",onSubmit:f,children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,t.jsx)("input",{type:"text",name:"username",id:"username",value:e.username,onChange:b,required:!0,className:"w-full mt-1 px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:l?"text":"password",name:"password",id:"password",value:e.password,onChange:b,required:!0,className:"w-full mt-1 px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-sm"}),(0,t.jsx)("button",{type:"button",onClick:()=>{c(e=>!e)},className:"absolute inset-y-0 right-3 flex items-center text-gray-600 hover:text-indigo-600",children:l?"Hide":"Show"})]})]}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{type:"checkbox",name:"rememberMe",id:"rememberMe",checked:r,onChange:e=>{d(e.target.checked)},className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),(0,t.jsx)("label",{htmlFor:"rememberMe",className:"ml-2 block text-sm text-gray-900",children:"Remember Me"})]}),(0,t.jsx)("div",{children:(0,t.jsx)("button",{type:"submit",className:"w-full py-2 px-4 bg-indigo-600 text-white font-medium rounded-md shadow-sm hover:bg-indigo-700 focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",disabled:g,children:g?"Logging in...":"Log in"})})]})]})})},l=()=>(0,t.jsx)(d,{})}},function(e){e.O(0,[888,774,179],function(){return e(e.s=6429)}),_N_E=e.O()}]);